package น้มุ1539;

import java.util.ArrayList;
import java.util.Scanner;

public class Main {
	private static  int h[];
	private static ArrayList<Integer> list = new ArrayList<>();

	
	public int lowerBound(ArrayList<Integer> al, int front, int rear, int key) {
		while (front < rear) {
			int mid = (front + rear) /2;
			if (al.get(mid) < key)
				front = mid + 1;
			else
				rear = mid;

		}
		return rear;
	}

	public int getHeight(int node) {
		int lb, left, right, size = list.size();
		lb = lowerBound(list, 0, size, node);
		left = lb > 0 ? h[list.get(lb - 1)] : 0;
		right = lb < size ? h[list.get(lb)] : 0;

		h[node] = Math.max(left, right) + 1;
		list.add(lb, node);
		return h[node];
	}
	
	public static void main(String[] args) throws Exception {
		Scanner sc = new Scanner(System.in);
		Main m = new Main();
		int sum = 0;
		int n = sc.nextInt();
		h = new int[n];
		for (int i = 0; i < n; i++) {
			sum += m.getHeight(sc.nextInt());
		}
		System.out.println(sum);

	}

	

}